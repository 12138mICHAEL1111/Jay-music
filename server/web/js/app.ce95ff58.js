(function(e){function t(t){for(var s,n,o=t[0],l=t[1],c=t[2],m=0,p=[];m<o.length;m++)n=o[m],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],s=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(s=!1)}s&&(r.splice(t--,1),e=n(n.s=i[0]))}return e}var s={},a={app:0},r=[];function n(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=s,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0a8d":function(e,t,i){"use strict";i("1355")},1355:function(e,t,i){},2154:function(e,t,i){},"22de":function(e,t,i){"use strict";i("8319")},"324c":function(e,t,i){},"3a0f":function(e,t,i){"use strict";i("324c")},"56d7":function(e,t,i){"use strict";i.r(t);i("e623"),i("e379"),i("5dc8"),i("37e1");var s=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e.isRouterAlive?i("router-view"):e._e()],1)},r=[],n={name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}},o=n,l=i("2877"),c=Object(l["a"])(o,a,r,!1,null,null,null),u=c.exports,m=i("8c4f"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"co1"},[i("el-header",{staticStyle:{height:"80px"}},[i("h1",{staticClass:"pagetitle"},[e._v("周同学音乐")]),i("div",{staticClass:"avatar"},[i("el-dropdown",{on:{command:e.handleCommand}},[i("img",{staticClass:"avatarimage",attrs:{src:e.avatarurl?e.avatarurl:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"myCollection"}},[e._v("我的收藏")]),i("el-dropdown-item",{attrs:{command:"setting"}},[e._v("个人设置")]),i("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.userToken,expression:"userToken"}],attrs:{command:"logoff"}},[e._v("注销")])],1)],1)],1)]),i("el-main",[i("div",{staticClass:"playListButton"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play"},on:{click:function(t){return e.playMusicList()}}},[e._v("播放歌单")])],1),e._l(e.items,(function(t,s){return i("el-row",{key:s,staticClass:"row-bg",staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-col",{attrs:{span:9}},[i("div",{staticClass:"musicList"},[i("span",{staticClass:"musictitle"},[e._v(" "+e._s(t.name)+" ——《 "+e._s(t.album)+" 》")]),i("div",{staticClass:"inButton"},[i("el-button",{attrs:{icon:"el-icon-caret-right",circle:"",type:"primary"},on:{click:function(t){return e.playSingle(s)}}}),i("el-button",{ref:"iconType",refInFor:!0,attrs:{icon:e.iconTypeArray[s],circle:"",type:"primary"},on:{click:function(t){return e.likeOrDislike(s)}}})],1)])])],1)})),i("audio",{ref:"audio",attrs:{src:""},on:{loadedmetadata:e.onLoadedmetadata,ended:function(t){return e.autoPlayNextSong()},timeupdate:e.onTimeUpdate}}),i("div",{staticClass:"dialog"},[i("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("关于周杰伦音乐的版权声明")]),i("el-dialog",{attrs:{title:"提示","append-to-body":"true",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("此网站上的所有周杰伦音乐仅仅作为Michael的编程项目的所需资源，并不用作商业用途，最终版权归周杰伦所有。")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)],2),i("el-footer",{directives:[{name:"show",rawName:"v-show",value:1==e.showPlayBar,expression:"showPlayBar == true"}]},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-col",{attrs:{span:9}},[i("div",{staticClass:"playBar"},[i("div",{staticClass:"MusicWidgets"},[i("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-back",size:"mini"},on:{click:e.previous}}),1==e.play?i("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-video-pause",size:"mini"},on:{click:function(t){return e.switchPlayStatus()}}}):e._e(),0==e.play?i("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-caret-right",size:"mini"},on:{click:function(t){return e.switchPlayStatus()}}}):e._e(),i("a",{staticClass:"musicText"},[e._v(" "+e._s(e.currentMusicName)+" ")]),i("el-slider",{staticClass:"slider",attrs:{"format-tooltip":e.formatProcessToolTip},on:{change:e.changeCurrentTime},nativeOn:{mousedown:function(t){e.isChange=!0},mouseup:function(t){e.isChange=!1}},model:{value:e.sliderTime,callback:function(t){e.sliderTime=t},expression:"sliderTime"}}),i("span",{staticClass:"musicTime"},[e._v(" "+e._s(e.formatCurrentTime)+"/"+e._s(e.formatTotalTime)+" ")]),i("el-button",{staticStyle:{"margin-left":"20px","background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{icon:"el-icon-right",size:"mini"},on:{click:e.next}}),i("el-popover",{attrs:{placement:"top",title:"播放列表",width:200,trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[i("el-button",{staticStyle:{color:"white","margin-left":"20px"},attrs:{type:"text"}},[e._v("播放列表")])]},proxy:!0}])},[i("ul",e._l(e.playList,(function(t,s){return i("li",{key:s},[e._v(" "+e._s(t.musicName)+" ")])})),0)])],1)])])],1)],1)],1)},d=[],h=(i("a434"),i("b0c0"),i("96cf"),i("1da1")),f={inject:["reload"],data:function(){return{avatarurl:"",userToken:"",items:[],iconTypeArray:[],play:!0,showPlayBar:!1,playList:[],currentMusicName:"",maxTime:0,currentTime:0,formatCurrentTime:"",formatTotalTime:"",sliderTime:0,isChange:!1,likemusic:[],dialogVisible:!1}},methods:{autoPlayNextSong:function(){for(var e=0;e<this.playList.length;e++)if(this.playList[e].address==this.$refs.audio.src){var t=e;break}t==this.playList.length-1?t=0:t+=1,this.$refs.audio.src=this.playList[t].address,this.$refs.audio.play(),this.currentMusicName=this.playList[t].musicName},playMusicList:function(){this.play=!0,this.showPlayBar=!0,this.playList.splice(0,this.playList.length);for(var e=0;e<this.items.length;e++){var t=this.items[e].name,i=this.items[e].musicAddress;this.playList.push({musicName:t,address:i})}this.$refs.audio.src=this.playList[0].address,this.$refs.audio.play(),this.currentMusicName=this.playList[0].musicName},switchPlayStatus:function(){1==this.play?(this.play=!1,this.$refs.audio.pause()):(this.play=!0,this.$refs.audio.play())},likeOrDislike:function(e){if(localStorage.userToken)if("el-icon-star-off"==this.iconTypeArray[e]){this.iconTypeArray[e]="el-icon-star-on",this.$refs.iconType[e].icon="el-icon-star-on";var t=this.items[e]._id;this.likemusic.push(t),this.$http.post("/music/like",{id:localStorage.id,musicid:this.likemusic}),this.likemusic.splice(0,this.likemusic.length),this.$message({type:"success",message:"收藏成功"})}else{this.iconTypeArray[e]="el-icon-star-off",this.$refs.iconType[e].icon="el-icon-star-off";var i=this.items[e]._id;this.likemusic.push(i),this.$http.post("/music/dislike",{id:localStorage.id,musicid:this.likemusic}),this.likemusic.splice(0,this.likemusic.length),this.$message({type:"error",message:"取消收藏"})}else this.$router.push("/login"),this.$message({type:"warning",message:"请先登录"})},handleCommand:function(e){"myCollection"==e?this.$router.push("/my-music/".concat(localStorage.id)):"setting"==e?this.$router.push("/my-profile/edit/".concat(localStorage.id)):"logoff"==e&&(localStorage.clear(),this.$message({type:"success",message:"注销成功"}),this.reload())},onTimeUpdate:function(e){if(1!=this.isChange){var t=e.target.currentTime,i=Math.floor(t/60),s=Math.round(t-60*i);s<10&&(s="0"+s),i<10&&(i="0"+i),this.currentTime=t,this.formatCurrentTime=i+":"+s,this.sliderTime=parseInt(this.currentTime/this.maxTime*100)}},formatProcessToolTip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=parseInt(this.maxTime/100*e);var t=Math.floor(e/60),i=e-60*t;t<10&&(t="0"+t),i<10&&(i="0"+i);var s=t+":"+i;return s},changeCurrentTime:function(e){this.$refs.audio.currentTime=parseInt(e/100*this.maxTime),this.isChange=!1},previous:function(){this.play=!0;for(var e=0;e<this.playList.length;e++)if(this.playList[e].address==this.$refs.audio.src){var t=e;break}0==t?t=this.playList.length-1:t-=1,this.$refs.audio.src=this.playList[t].address,this.$refs.audio.play(),this.currentMusicName=this.playList[t].musicName},next:function(){this.play=!0;for(var e=0;e<this.playList.length;e++)if(this.playList[e].address==this.$refs.audio.src){var t=e;break}t==this.playList.length-1?t=0:t+=1,this.$refs.audio.src=this.playList[t].address,this.$refs.audio.play(),this.currentMusicName=this.playList[t].musicName},playSingle:function(e){this.play=!0,this.showPlayBar=!0,this.currentMusicName=this.items[e].name;for(var t=!1,i=0;i<this.playList.length;i++)if(this.playList[i].address==this.items[e].musicAddress){t=!0;break}if(0==t){var s=this.items[e].musicAddress;this.playList.push({musicName:this.currentMusicName,address:s})}this.$refs.audio.src=this.items[e].musicAddress,this.$refs.audio.play()},onLoadedmetadata:function(e){var t=parseInt(e.target.duration),i=Math.floor(t/60),s=t-60*i;i<10&&(i="0"+i),s<10&&(s="0"+s),this.formatTotalTime=i+":"+s,this.maxTime=t},fetch:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var i,s,a,r,n,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/musics");case 2:return i=t.sent,e.userToken=localStorage.userToken,e.items=i.data,t.next=7,e.$http.post("/avatar",{id:localStorage.id});case 7:return s=t.sent,e.avatarurl=s.data.avataraddress,t.next=11,e.$http.post("/user/musicliked",{id:localStorage.id});case 11:if(a=t.sent,"fail"!=a.data.message){t.next=16;break}for(r=0;r<e.items.length;r++)e.iconTypeArray.push("el-icon-star-off");t.next=33;break;case 16:n=a.data.likemusic,o=!1,l=0;case 19:if(!(l<e.items.length)){t.next=33;break}c=0;case 21:if(!(c<n.length)){t.next=28;break}if(e.items[l]._id!=n[c]._id){t.next=25;break}return o=!0,t.abrupt("break",28);case 25:c++,t.next=21;break;case 28:1==o?e.iconTypeArray.push("el-icon-star-on"):e.iconTypeArray.push("el-icon-star-off"),o=!1;case 30:l++,t.next=19;break;case 33:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetch()}},y=f,g=(i("22de"),Object(l["a"])(y,p,d,!1,null,null,null)),v=g.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"login-card",attrs:{header:"请先登录"}},[i("el-form",{nativeOn:{submit:function(t){return t.preventDefault(),e.login(t)}}},[i("el-form-item",{attrs:{label:"用户名"}},[i("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),i("el-form-item",{attrs:{label:"密码"}},[i("el-input",{attrs:{type:"password"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v(" 登录 ")])],1)],1),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.push("/sign-in")}}},[e._v("没有账号？注册")])],1)],1)},k=[],w={data:function(){return{model:{}}},methods:{login:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("login",e.model);case 2:i=t.sent,localStorage.userToken=i.data.userToken,localStorage.id=i.data.id,e.$router.push("/"),e.$message({type:"success",message:"登陆成功, 欢迎".concat(i.data.name)});case 7:case"end":return t.stop()}}),t)})))()}}},x=w,T=(i("66c0"),Object(l["a"])(x,b,k,!1,null,null,null)),$=T.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"co1"},[i("el-header",{staticStyle:{height:"80px"}},[i("h1",{staticClass:"title"},[e._v("我的收藏")]),i("div",{staticClass:"avatar"},[i("el-dropdown",{on:{command:e.handleCommand}},[i("img",{staticClass:"avatarimage",attrs:{src:e.avatarurl?e.avatarurl:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"myCollection"}},[e._v("我的收藏")]),i("el-dropdown-item",{attrs:{command:"setting"}},[e._v("个人设置")]),i("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.userToken,expression:"userToken"}],attrs:{command:"logoff"}},[e._v("注销")])],1)],1)],1)]),i("el-main",[i("div",{staticClass:"playListButton"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play"},on:{click:function(t){return e.playMusicList()}}},[e._v("播放歌单")])],1),e._l(e.items,(function(t,s){return i("el-row",{key:s,staticClass:"row-bg",staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-col",{attrs:{span:9}},[i("div",{staticClass:"musicList"},[i("span",{staticClass:"musictitle"},[e._v(" "+e._s(t.name)+" ——《 "+e._s(t.album)+" 》")]),i("div",{staticClass:"inButton"},[i("el-button",{attrs:{icon:"el-icon-caret-right",circle:"",type:"primary"},on:{click:function(t){return e.playSingle(s)}}}),i("el-button",{ref:"iconType",refInFor:!0,attrs:{icon:e.iconTypeArray[s],circle:"",type:"primary"},on:{click:function(t){return e.likeOrDislike(s)}}})],1)])])],1)})),i("audio",{ref:"audio",attrs:{src:""},on:{loadedmetadata:e.onLoadedmetadata,ended:function(t){return e.autoPlayNextSong()},timeupdate:e.onTimeUpdate}})],2),i("el-footer",{directives:[{name:"show",rawName:"v-show",value:1==e.showPlayBar,expression:"showPlayBar == true"}]},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-col",{attrs:{span:9}},[i("div",{staticClass:"playBar"},[i("div",{staticClass:"MusicWidgets"},[i("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-back",size:"mini"},on:{click:e.previous}}),1==e.play?i("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-video-pause",size:"mini"},on:{click:function(t){return e.switchPlayStatus()}}}):e._e(),0==e.play?i("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-caret-right",size:"mini"},on:{click:function(t){return e.switchPlayStatus()}}}):e._e(),i("a",{staticClass:"musicText"},[e._v(" "+e._s(e.currentMusicName)+" ")]),i("el-slider",{staticClass:"slider",attrs:{"format-tooltip":e.formatProcessToolTip},on:{change:e.changeCurrentTime},nativeOn:{mousedown:function(t){e.isChange=!0},mouseup:function(t){e.isChange=!1}},model:{value:e.sliderTime,callback:function(t){e.sliderTime=t},expression:"sliderTime"}}),i("span",{staticClass:"musicTime"},[e._v(" "+e._s(e.formatCurrentTime)+"/"+e._s(e.formatTotalTime)+" ")]),i("el-button",{staticStyle:{"margin-left":"20px","background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{icon:"el-icon-right",size:"mini"},on:{click:e.next}}),i("el-popover",{attrs:{placement:"top",title:"播放列表",width:200,trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[i("el-button",{staticStyle:{color:"white","margin-left":"20px"},attrs:{type:"text"}},[e._v("播放列表")])]},proxy:!0}])},[i("ul",e._l(e.playList,(function(t,s){return i("li",{key:s},[e._v(" "+e._s(t.musicName)+" ")])})),0)])],1)])])],1)],1)],1)},L=[],C={inject:["reload"],data:function(){return{avatarurl:"",userToken:"",items:[],iconTypeArray:[],play:!0,showPlayBar:!1,playList:[],currentMusicName:"",maxTime:0,currentTime:0,formatCurrentTime:"",formatTotalTime:"",sliderTime:0,isChange:!1,likemusic:[]}},methods:{autoPlayNextSong:function(){for(var e=0;e<this.playList.length;e++)if(this.playList[e].address==this.$refs.audio.src){var t=e;break}t==this.playList.length-1?t=0:t+=1,this.$refs.audio.src=this.playList[t].address,this.$refs.audio.play(),this.currentMusicName=this.playList[t].musicName},playMusicList:function(){this.play=!0,this.showPlayBar=!0,this.playList.splice(0,this.playList.length);for(var e=0;e<this.items.length;e++){var t=this.items[e].name,i=this.items[e].musicAddress;this.playList.push({musicName:t,address:i})}this.$refs.audio.src=this.playList[0].address,this.$refs.audio.play(),this.currentMusicName=this.playList[0].musicName},switchPlayStatus:function(){1==this.play?(this.play=!1,this.$refs.audio.pause()):(this.play=!0,this.$refs.audio.play())},likeOrDislike:function(e){if(localStorage.userToken)if("el-icon-star-off"==this.iconTypeArray[e]){this.iconTypeArray[e]="el-icon-star-on",this.$refs.iconType[e].icon="el-icon-star-on";var t=this.items[e]._id;this.likemusic.push(t),this.$http.post("/music/like",{id:localStorage.id,musicid:this.likemusic}),this.likemusic.splice(0,this.likemusic.length),this.$message({type:"success",message:"收藏成功"})}else{this.iconTypeArray[e]="el-icon-star-off",this.$refs.iconType[e].icon="el-icon-star-off";var i=this.items[e]._id;this.likemusic.push(i),this.$http.post("/music/dislike",{id:localStorage.id,musicid:this.likemusic}),this.likemusic.splice(0,this.likemusic.length),this.$message({type:"error",message:"取消收藏"})}else this.$router.push("/login"),this.$message({type:"warning",message:"请先登录"})},handleCommand:function(e){"myCollection"==e?this.$router.push("/my-music/".concat(localStorage.id)):"setting"==e?this.$router.push("/my-profile/edit/".concat(localStorage.id)):"logoff"==e&&(localStorage.clear(),this.$message({type:"success",message:"注销成功"}),this.reload())},errorHandler:function(){return!0},onTimeUpdate:function(e){if(1!=this.isChange){var t=e.target.currentTime,i=Math.floor(t/60),s=Math.round(t-60*i);s<10&&(s="0"+s),i<10&&(i="0"+i),this.currentTime=t,this.formatCurrentTime=i+":"+s,this.sliderTime=parseInt(this.currentTime/this.maxTime*100)}},formatProcessToolTip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=parseInt(this.maxTime/100*e);var t=Math.floor(e/60),i=e-60*t;t<10&&(t="0"+t),i<10&&(i="0"+i);var s=t+":"+i;return s},changeCurrentTime:function(e){this.$refs.audio.currentTime=parseInt(e/100*this.maxTime),this.isChange=!1},previous:function(){this.play=!0;for(var e=0;e<this.playList.length;e++)if(this.playList[e].address==this.$refs.audio.src){var t=e;break}0==t?t=this.playList.length-1:t-=1,this.$refs.audio.src=this.playList[t].address,this.$refs.audio.play(),this.currentMusicName=this.playList[t].musicName},next:function(){this.play=!0;for(var e=0;e<this.playList.length;e++)if(this.playList[e].address==this.$refs.audio.src){var t=e;break}t==this.playList.length-1?t=0:t+=1,this.$refs.audio.src=this.playList[t].address,this.$refs.audio.play(),this.currentMusicName=this.playList[t].musicName},playSingle:function(e){this.play=!0,this.showPlayBar=!0,this.currentMusicName=this.items[e].name;for(var t=!1,i=0;i<this.playList.length;i++)if(this.playList[i].address==this.items[e].musicAddress){t=!0;break}if(0==t){var s=this.items[e].musicAddress;this.playList.push({musicName:this.currentMusicName,address:s})}this.$refs.audio.src=this.items[e].musicAddress,this.$refs.audio.play()},onLoadedmetadata:function(e){var t=parseInt(e.target.duration),i=Math.floor(t/60),s=t-60*i;i<10&&(i="0"+i),s<10&&(s="0"+s),this.formatTotalTime=i+":"+s,this.maxTime=t},fetch:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var i,s,a,r,n,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/user/musicliked",{id:localStorage.id});case 2:return i=t.sent,e.userToken=localStorage.userToken,e.items=i.data.likemusic,t.next=7,e.$http.post("/avatar",{id:localStorage.id});case 7:return s=t.sent,e.avatarurl=s.data.avataraddress,t.next=11,e.$http.post("/user/musicliked",{id:localStorage.id});case 11:if(a=t.sent,"fail"!=a.data.message){t.next=16;break}for(r=0;r<e.items.length;r++)e.iconTypeArray.push("el-icon-star-off");t.next=33;break;case 16:n=a.data.likemusic,o=!1,l=0;case 19:if(!(l<e.items.length)){t.next=33;break}c=0;case 21:if(!(c<n.length)){t.next=28;break}if(e.items[l]._id!=n[c]._id){t.next=25;break}return o=!0,t.abrupt("break",28);case 25:c++,t.next=21;break;case 28:1==o?e.iconTypeArray.push("el-icon-star-on"):e.iconTypeArray.push("el-icon-star-off"),o=!1;case 30:l++,t.next=19;break;case 33:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetch()}},S=C,P=(i("da56"),Object(l["a"])(S,_,L,!1,null,null,null)),N=P.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"login-card",attrs:{header:"注册"}},[i("el-form",{ref:"signInForm",attrs:{model:e.model,rules:e.rules},nativeOn:{submit:function(t){return t.preventDefault(),e.login(t)}}},[i("el-form-item",{attrs:{label:"用户名",prop:"username"}},[i("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{type:"password",minlength:"6"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),i("el-form-item",{attrs:{label:"请再次输入密码"}},[i("el-input",{attrs:{type:"password"},model:{value:e.secondInputPassword,callback:function(t){e.secondInputPassword=t},expression:"secondInputPassword"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v(" 注册并登录 ")])],1)],1)],1)],1)},M=[],O={data:function(){return{model:{},secondInputPassword:"",rules:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]}}},methods:{login:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs["signInForm"].validate(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(i){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=14;break}if(e.model.password==e.secondInputPassword){t.next=5;break}e.$message({type:"warning",message:"请输入相同的密码"}),t.next=12;break;case 5:return t.next=7,e.$http.post("signIn",e.model);case 7:s=t.sent,localStorage.userToken=s.data.userToken,localStorage.id=s.data.id,e.$router.push("/"),e.$message({type:"success",message:"登陆成功, 欢迎".concat(s.data.name)});case 12:t.next=15;break;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},j=O,R=(i("0a8d"),Object(l["a"])(j,A,M,!1,null,null,null)),I=R.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"profile"},[i("h2",[e._v("个人资料")]),i("el-form",{ref:"profileForm",attrs:{model:e.model,rules:e.rules},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[i("div",{staticClass:"inputForm",staticStyle:{"margin-left":"20px"}},[i("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"用户名",prop:"username"}},[i("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),i("el-upload",{staticClass:"upload",attrs:{action:e.$http.defaults.baseURL+"/upload","on-success":e.afterUpload,"on-remove":e.handleRemove,limit:1,accept:".jpg, .png"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点我上传/修改头像")])],1),i("br"),i("br"),i("el-form-item",[i("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)])],1)},B=[],E={props:{id:{}},data:function(){return{originalName:"",filename:"",model:{},rules:{username:[{required:!0,messgae:"请输入用户名",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs["profileForm"].validate(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=13;break}if(e.originalName!=e.model.username){t.next=6;break}e.$router.push("/"),e.$message({type:"success",message:"编辑成功"}),t.next=11;break;case 6:return t.next=8,e.$http.put("user/edit/".concat(e.id),e.model);case 8:t.sent,e.$router.push("/"),e.$message({type:"success",message:"编辑成功"});case 11:t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},afterUpload:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.model.avataraddress=e.url,t.filename=e.filename,i.next=4,t.$http.put("user/edit/avatar/".concat(t.id),t.model);case 4:case"end":return i.stop()}}),i)})))()},handleRemove:function(){this.$http.delete("/deleteuploadavatar/".concat(this.filename))},fetch:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/user/".concat(e.id));case 2:i=t.sent,e.model=i.data,e.originalName=e.model.username;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetch()}},U=E,D=(i("3a0f"),Object(l["a"])(U,z,B,!1,null,null,null)),F=D.exports;s["default"].use(m["a"]);var V=[{path:"/",name:"Main",component:v,meta:{isPublic:!0,keepAlive:!0}},{path:"/login",name:"Login",component:$,meta:{isPublic:!0}},{path:"/my-music/:id",name:"my-music",component:N,meta:{isPublic:!1,keepAlive:!0}},{path:"/sign-in",name:"sign-in",component:I,meta:{isPublic:!0}},{path:"/my-profile/edit/:id",name:"myProfile",props:!0,component:F}],q=new m["a"]({routes:V});q.beforeEach((function(e,t,i){if(!e.meta.isPublic&&!localStorage.userToken)return i("/login");i()}));var H=m["a"].prototype.push;m["a"].prototype.push=function(e,t,i){return t||i?H.call(this,e,t,i):H.call(this,e).catch((function(e){return e}))};var J=q,W=i("5c96"),G=i.n(W);i("c69f");s["default"].use(G.a);i("caad6"),i("d3b7"),i("2532");var K=i("bc3a"),Q=i.n(K),X=Q.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL||"/web/api"});X.interceptors.response.use((function(e){return e}),(function(e){return e.response.data.message&&s["default"].prototype.$message({type:"error",message:e.response.data.message}),401==e.response.status&&J.push("/login"),Promise.reject(e)})),s["default"].config.warnHandler=function(e){if(!e.includes("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders."))return console.warn&&console.warn(e)},X.interceptors.request.use((function(e){return localStorage.userToken&&(e.headers.Authorization="Bearer "+localStorage.userToken),e}),(function(e){return Promise.reject(e)}));var Y=X;s["default"].config.productionTip=!1,s["default"].prototype.$http=Y,new s["default"]({router:J,render:function(e){return e(u)}}).$mount("#app")},"66c0":function(e,t,i){"use strict";i("2154")},8319:function(e,t,i){},a81c:function(e,t,i){},c69f:function(e,t,i){},da56:function(e,t,i){"use strict";i("a81c")}});
//# sourceMappingURL=app.ce95ff58.js.map