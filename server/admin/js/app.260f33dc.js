(function(t){function e(e){for(var s,i,o=e[0],u=e[1],l=e[2],m=0,p=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);c&&c(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],s=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=r[0]))}return t}var s={},a={app:0},n=[];function i(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=s,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/admin/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0742":function(t,e,r){"use strict";r("8d33")},"22de":function(t,e,r){"use strict";r("8319")},"56d7":function(t,e,r){"use strict";r.r(e);r("e623"),r("e379"),r("5dc8"),r("37e1");var s=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],i=r("2877"),o={},u=Object(i["a"])(o,a,n,!1,null,null,null),l=u.exports,c=r("5c96"),m=r.n(c);r("c69f");s["default"].use(m.a);var p=r("8c4f"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{staticClass:"co1"},[r("el-header",{staticStyle:{height:"80px"}},[r("h1",{staticClass:"pagetitle"},[t._v(" 周同学音乐(admin) ")]),r("div",{staticClass:"uploadButton"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/musics/new")}}},[t._v("新增音乐"),r("i",{staticClass:"el-icon-upload el-icon--right"})]),r("br"),t._v(" "),r("br"),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/admin/new")}}},[t._v("新增管理员"),r("i",{staticClass:"el-icon-user-solid"})])],1)]),r("el-main",[r("div",{staticClass:"playListButton"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-video-play"},on:{click:function(e){return t.playMusicList()}}},[t._v("播放歌单")])],1),t._l(t.items,(function(e,s){return r("el-row",{key:s,staticClass:"row-bg",staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("div",{staticClass:"musicList"},[r("span",{staticClass:"musictitle"},[t._v(" "+t._s(e.name)+" ——《 "+t._s(e.album)+" 》")]),r("div",{staticClass:"inButton"},[r("el-button",{attrs:{icon:"el-icon-caret-right",circle:"",type:"primary"},on:{click:function(e){return t.playSingle(s)}}}),r("el-button",{attrs:{icon:"el-icon-edit",circle:"",type:"info"},on:{click:function(r){return t.$router.push("/musics/edit/"+e._id)}}}),r("el-button",{attrs:{icon:"el-icon-delete-solid",circle:"",type:"danger"},on:{click:function(r){return t.deleteMusic(e._id)}}})],1)])])],1)})),r("audio",{ref:"audio",attrs:{src:""},on:{loadedmetadata:t.onLoadedmetadata,ended:function(e){return t.autoPlayNextSong()},timeupdate:t.onTimeUpdate}})],2),r("el-footer",{directives:[{name:"show",rawName:"v-show",value:1==t.showPlayBar,expression:"showPlayBar == true"}]},[r("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("div",{staticClass:"playBar"},[r("div",{staticClass:"MusicWidgets"},[r("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-back",size:"mini"},on:{click:t.previous}}),1==t.play?r("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-video-pause",size:"mini"},on:{click:function(e){return t.switchPlayStatus()}}}):t._e(),0==t.play?r("el-button",{staticStyle:{"background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{circle:"",icon:"el-icon-caret-right",size:"mini"},on:{click:function(e){return t.switchPlayStatus()}}}):t._e(),r("a",{staticClass:"musicText"},[t._v(" "+t._s(t.currentMusicName)+" ")]),r("el-slider",{staticClass:"slider",attrs:{"format-tooltip":t.formatProcessToolTip},on:{change:t.changeCurrentTime},nativeOn:{mousedown:function(e){t.isChange=!0},mouseup:function(e){t.isChange=!1}},model:{value:t.sliderTime,callback:function(e){t.sliderTime=e},expression:"sliderTime"}}),r("span",{staticClass:"musicTime"},[t._v(" "+t._s(t.formatCurrentTime)+"/"+t._s(t.formatTotalTime)+" ")]),r("el-button",{staticStyle:{"margin-left":"20px","background-color":"#333",color:"white","border-width":"0px","font-size":"20px"},attrs:{icon:"el-icon-right",size:"mini"},on:{click:t.next}}),r("el-popover",{attrs:{placement:"top",title:"播放列表",width:200,trigger:"click"},scopedSlots:t._u([{key:"reference",fn:function(){return[r("el-button",{staticStyle:{color:"white","margin-left":"20px"},attrs:{type:"text"}},[t._v("播放列表")])]},proxy:!0}])},[r("ul",t._l(t.playList,(function(e,s){return r("li",{key:s},[t._v(" "+t._s(e.musicName)+" ")])})),0)])],1)])])],1)],1)],1)},f=[],h=(r("a434"),r("b0c0"),r("96cf"),r("1da1")),y={data:function(){return{items:[],maxTime:0,currentTime:0,formatCurrentTime:"",formatTotalTime:"",sliderTime:0,isChange:!1,play:!0,showPlayBar:!1,playList:[],currentMusicName:""}},methods:{startPlayOrPause:function(t){for(var e=0;e<this.audio.length;e++)1==this.audio[e].playing&&this.$refs.audio[e].pause();this.audio[t].playing?(this.$refs.audio[t].pause(),this.audio[t].playing=!1):(this.$refs.audio[t].play(),this.audio[t].playing=!0)},autoPlayNextSong:function(){for(var t=0;t<this.playList.length;t++)if(this.playList[t].address==this.$refs.audio.src){var e=t;break}e==this.playList.length-1?e=0:e+=1,this.$refs.audio.src=this.playList[e].address,this.$refs.audio.play(),this.currentMusicName=this.playList[e].musicName},playMusicList:function(){this.play=!0,this.showPlayBar=!0,this.playList.splice(0,this.playList.length);for(var t=0;t<this.items.length;t++){var e=this.items[t].name,r=this.items[t].musicAddress;this.playList.push({musicName:e,address:r})}this.$refs.audio.src=this.playList[0].address,this.$refs.audio.play(),this.currentMusicName=this.playList[0].musicName},switchPlayStatus:function(){1==this.play?(this.play=!1,this.$refs.audio.pause()):(this.play=!0,this.$refs.audio.play())},onTimeUpdate:function(t){if(1!=this.isChange){var e=t.target.currentTime,r=Math.floor(e/60),s=Math.round(e-60*r);s<10&&(s="0"+s),r<10&&(r="0"+r),this.currentTime=e,this.formatCurrentTime=r+":"+s,this.sliderTime=parseInt(this.currentTime/this.maxTime*100)}},formatProcessToolTip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t=parseInt(this.maxTime/100*t);var e=Math.floor(t/60),r=t-60*e;e<10&&(e="0"+e),r<10&&(r="0"+r);var s=e+":"+r;return s},changeCurrentTime:function(t){this.$refs.audio.currentTime=parseInt(t/100*this.maxTime),this.isChange=!1},previous:function(){this.play=!0;for(var t=0;t<this.playList.length;t++)if(this.playList[t].address==this.$refs.audio.src){var e=t;break}0==e?e=this.playList.length-1:e-=1,this.$refs.audio.src=this.playList[e].address,this.$refs.audio.play(),this.currentMusicName=this.playList[e].musicName},next:function(){this.play=!0;for(var t=0;t<this.playList.length;t++)if(this.playList[t].address==this.$refs.audio.src){var e=t;break}e==this.playList.length-1?e=0:e+=1,this.$refs.audio.src=this.playList[e].address,this.$refs.audio.play(),this.currentMusicName=this.playList[e].musicName},playSingle:function(t){this.play=!0,this.showPlayBar=!0,this.currentMusicName=this.items[t].name;for(var e=!1,r=0;r<this.playList.length;r++)if(this.playList[r].address==this.items[t].musicAddress){e=!0;break}if(0==e){var s=this.items[t].musicAddress;this.playList.push({musicName:this.currentMusicName,address:s})}this.$refs.audio.src=this.items[t].musicAddress,this.$refs.audio.play()},onLoadedmetadata:function(t){var e=parseInt(t.target.duration),r=Math.floor(e/60),s=e-60*r;r<10&&(r="0"+r),s<10&&(s="0"+s),this.formatTotalTime=r+":"+s,this.maxTime=e},fetch:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("rest/musics");case 2:r=e.sent,t.items=r.data;case 4:case"end":return e.stop()}}),e)})))()},deleteMusic:function(t){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$confirm("此操作将永久删除该歌曲, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(h["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.delete("rest/musics/".concat(t));case 2:r.sent,e.fetch(),e.$message({type:"success",message:"删除成功"});case 5:case"end":return r.stop()}}),r)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return r.stop()}}),r)})))()}},created:function(){this.fetch()}},v=y,b=(r("22de"),Object(i["a"])(v,d,f,!1,null,null,null)),g=b.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",{staticStyle:{"margin-left":"20px"}},[t._v(" 添加音乐")]),r("el-form",{ref:"musicForm",attrs:{model:this.model,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.save(e)}}},[r("div",{staticClass:"inputForm",staticStyle:{"margin-left":"20px"}},[r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"歌曲名称",prop:"name"}},[r("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"专辑名称",prop:"album"}},[r("el-input",{model:{value:t.model.album,callback:function(e){t.$set(t.model,"album",e)},expression:"model.album"}})],1),r("el-upload",{staticClass:"upload",attrs:{action:t.$http.defaults.baseURL+"/upload","on-success":t.afterUpload,"on-remove":t.handleRemove,limit:1,accept:".mp3, .wma, .flac"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点我上传音乐")])],1),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("提交表单")])],1),r("el-button",{attrs:{type:"warning"},on:{click:t.back}},[t._v("返回")])],1)])],1)},x=[],$={data:function(){return{model:{},rules:{name:[{required:!0,trigger:"blur"}],album:[{required:!0,trigger:"blur"}]},filename:""}},methods:{back:function(){this.$router.go(-1)},afterUpload:function(t){this.model.musicAddress=t.url,this.filename=t.filename},handleRemove:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$http.delete("/deleteuploadavatar/".concat(t.filename));case 1:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;this.$refs["musicForm"].validate(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,t.$http.post("rest/musics",t.model);case 3:e.sent,t.$router.push("/"),t.$message({type:"success",message:"保存成功"}),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},k=$,_=(r("0742"),Object(i["a"])(k,w,x,!1,null,null,null)),L=_.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",{staticStyle:{"margin-left":"20px"}},[t._v(" 编辑音乐")]),r("el-form",{ref:"musicForm",attrs:{model:this.model,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.save(e)}}},[r("div",{staticClass:"inputForm",staticStyle:{"margin-left":"20px"}},[r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"歌曲名称",prop:"name"}},[r("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"专辑名称"}},[r("el-input",{model:{value:t.model.album,callback:function(e){t.$set(t.model,"album",e)},expression:"model.album"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("上传")])],1)],1)])],1)},S=[],O={props:{id:{}},data:function(){return{model:{},rules:{name:[{required:!0,messgae:"请输入歌曲名称",trigger:"blur"}]}}},methods:{save:function(){var t=this;this.$refs["musicForm"].validate(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,t.$http.put("rest/musics/".concat(t.id),t.model);case 3:e.sent,t.$router.push("/"),t.$message({type:"success",message:"编辑成功"}),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},fetch:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("rest/musics/".concat(t.id));case 2:r=e.sent,t.model=r.data;case 4:case"end":return e.stop()}}),e)})))()}},created:function(){this.fetch()}},C=O,j=Object(i["a"])(C,T,S,!1,null,null,null),P=j.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",{staticStyle:{"margin-left":"20px"}},[t._v(" 添加管理员")]),r("el-form",{ref:"adminForm",attrs:{model:this.model,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.save(e)}}},[r("div",{staticClass:"inputForm",staticStyle:{"margin-left":"20px"}},[r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("提交表单")])],1),r("el-button",{attrs:{type:"warning"},on:{click:t.back}},[t._v("返回")])],1)])],1)},M=[],N={data:function(){return{model:{},rules:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]}}},methods:{back:function(){this.$router.go(-1)},save:function(){var t=this;this.$refs["adminForm"].validate(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,t.$http.post("rest/admin_users",t.model);case 3:e.sent,t.$router.push("/"),t.$message({type:"success",message:"保存成功"}),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},B=N,E=Object(i["a"])(B,R,M,!1,null,null,null),z=E.exports,A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",{staticClass:"login-card",attrs:{header:"请先登录"}},[r("el-form",{nativeOn:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}})],1),r("el-form-item",{attrs:{label:"密码"}},[r("el-input",{attrs:{type:"password"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v(" 登录 ")])],1)],1)],1)],1)},F=[],U={data:function(){return{model:{}}},methods:{login:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("login",t.model);case 2:r=e.sent,localStorage.token=r.data.token,t.$router.push("/"),t.$message({type:"success",message:"登陆成功, 欢迎".concat(r.data.username)});case 6:case"end":return e.stop()}}),e)})))()}}},q=U,D=(r("d6db"),Object(i["a"])(q,A,F,!1,null,null,null)),I=D.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.testList,(function(e,s){return r("p",{key:s},[t._v(" "+t._s(t.testList[s])+" ")])})),r("el-button",{on:{click:function(e){return t.add()}}},[t._v(" click me ")])],2)},V=[],W={data:function(){return{testList:[]}},methods:{add:function(){this.testList.push("x")}}},G=W,H=Object(i["a"])(G,J,V,!1,null,null,null),K=H.exports;s["default"].use(p["a"]);var Q=[{path:"/",name:"main",component:g},{path:"/musics/new",name:"new",component:L},{path:"/musics/edit/:id",name:"edit",props:!0,component:P},{path:"/admin/new",name:"admin",component:z},{path:"/login",name:"login",component:I,meta:{isPublic:!0}},{path:"/test",name:"test",component:K}],X=new p["a"]({routes:Q});X.beforeEach((function(t,e,r){if(!t.meta.isPublic&&!localStorage.token)return r("/login");r()}));var Y=p["a"].prototype.push;p["a"].prototype.push=function(t,e,r){return e||r?Y.call(this,t,e,r):Y.call(this,t).catch((function(t){return t}))};var Z=X,tt=(r("d3b7"),r("bc3a")),et=r.n(tt),rt=et.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_API_URL||"/admin/api"});rt.interceptors.response.use((function(t){return t}),(function(t){return t.response.data.message&&s["default"].prototype.$message({type:"error",message:t.response.data.message}),401==t.response.status&&Z.push("/login"),Promise.reject(t)})),rt.interceptors.request.use((function(t){return localStorage.token&&(t.headers.Authorization="Bearer "+localStorage.token),t}),(function(t){return Promise.reject(t)}));var st=rt;s["default"].config.productionTip=!1,s["default"].prototype.$http=st,new s["default"]({router:Z,render:function(t){return t(l)}}).$mount("#app")},8319:function(t,e,r){},"8d33":function(t,e,r){},c69f:function(t,e,r){},d6db:function(t,e,r){"use strict";r("e67a")},e67a:function(t,e,r){}});
//# sourceMappingURL=app.260f33dc.js.map